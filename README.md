# ğŸ§ª Tryout Reservation API

ì˜¨ë¼ì¸ ì‹œí—˜ í”Œë«í¼ì„ ìœ„í•œ ì˜ˆì•½ API ì„œë²„ì…ë‹ˆë‹¤.
ê³ ê°ì€ ì‹œí—˜ ì¼ì •ì„ ì¡°íšŒí•˜ê³  ì˜ˆì•½ì„ ì‹ ì²­í•˜ë©°, ì–´ë“œë¯¼ì€ ì˜ˆì•½ì„ í™•ì • ë° ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **FastAPI** â€“ Python ì›¹ í”„ë ˆì„ì›Œí¬
- **SQLModel** â€“ SQLAlchemy + Pydantic ê¸°ë°˜ ORM
- **PostgreSQL** â€“ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **Docker Compose** â€“ ë¡œì»¬ í™˜ê²½ ë° ì˜ì¡´ì„± êµ¬ì„±
- **Pytest / Coverage** â€“ í…ŒìŠ¤íŠ¸ ë° ì»¤ë²„ë¦¬ì§€ ì¸¡ì •
- **Ruff, Mypy** â€“ ë¦°íŒ… ë° íƒ€ì… ê²€ì‚¬

---

## ğŸ“ ì£¼ìš” í´ë” êµ¬ì¡°

```bash
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ alembic/             # ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ core/                # ì„¤ì •, ë³´ì•ˆ, íŠ¸ëœì­ì…˜ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ models/              # Pydantic / SQLModel ëª¨ë¸
â”‚   â”œâ”€â”€ repository/          # DB ì¿¼ë¦¬ ì¶”ìƒí™”
â”‚   â”œâ”€â”€ routers/             # API ë¼ìš°í„°
â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ tests/               # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ main.py              # FastAPI ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ dependencies.py      # Depends ê´€ë ¨ ê³µí†µ ì²˜ë¦¬
â”‚   â””â”€â”€ backend_pre_start.py # ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ htmlcov/                 # ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
â”œâ”€â”€ pyproject.toml           # ì˜ì¡´ì„± ê´€ë¦¬
â”œâ”€â”€ Dockerfile
â””â”€â”€ scripts/
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### Docker ì‹¤í–‰

```bash
docker-compose up --build
```

- ë°±ì—”ë“œ: [http://localhost:8000](http://localhost:8000)
- Swagger ë¬¸ì„œ: [http://localhost:8000/docs](http://localhost:8000/docs)

---

## ğŸ” ì¸ì¦ ë° ê¶Œí•œ

- ë¡œê·¸ì¸: `/api/v1/utils/login/access-token`
- ê¶Œí•œì€ `is_superuser` ì—¬ë¶€ë¡œ êµ¬ë¶„
- ì¼ë°˜ ì‚¬ìš©ì: ì‹œí—˜ ì¡°íšŒ ë° ì˜ˆì•½ ì‹ ì²­
- ì–´ë“œë¯¼: ëª¨ë“  ì˜ˆì•½ ê´€ë¦¬ ë° í™•ì • ê°€ëŠ¥

---

## ğŸ“Œ ê¸°ëŠ¥ ìš”ì•½

| ê¸°ëŠ¥           | ê³ ê° (User)    | ì–´ë“œë¯¼ (Admin) |
| -------------- | -------------- | -------------- |
| ì‹œí—˜ ì¼ì • ì¡°íšŒ | âœ…             | âœ…             |
| ì‹œí—˜ ì˜ˆì•½ ì‹ ì²­ | âœ…             | âŒ             |
| ì˜ˆì•½ ì¡°íšŒ      | ë³¸ì¸ ì˜ˆì•½ë§Œ    | ì „ì²´ ì˜ˆì•½      |
| ì˜ˆì•½ ìˆ˜ì •/ì‚­ì œ | í™•ì • ì „ ë³¸ì¸ë§Œ | ì „ì²´ ê°€ëŠ¥      |
| ì˜ˆì•½ í™•ì •      | âŒ             | âœ…             |

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
cd backend
bash ./scripts/test.sh
```

> ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ëŠ” `/backend/htmlcov/index.html`ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ§ª í…ŒìŠ¤íŠ¸ìš© ì´ˆê¸° ë°ì´í„° (ìë™ ìƒì„±)

`app/db.py`ì˜ `init_db()`ë¥¼ í†µí•´ ì´ˆê¸° ë°ì´í„°ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤:

- âœ… **ì–´ë“œë¯¼ ê³„ì •**:

  - ì´ë©”ì¼: `admin@example.com`
  - ë¹„ë°€ë²ˆí˜¸: `.env`ì˜ `FIRST_SUPERUSER_PASSWORD` ê°’ ì‚¬ìš©

- âœ… **ì¼ë°˜ ìœ ì € 10ëª…**:

  - ì´ë©”ì¼: `user0@example.com` ~ `user9@example.com`
  - ë¹„ë°€ë²ˆí˜¸: `password123`

- âœ… **ì‹œí—˜ ì¼ì • 10ê°œ**:
  - ì•ì˜ 5ê°œëŠ” ì˜ˆì•½ ê°€ëŠ¥ (ì‹œí—˜ì¼ 10ì¼ í›„)
  - ë’¤ì˜ 5ê°œëŠ” ì˜ˆì•½ ë¶ˆê°€ (ì‹œí—˜ì¼ 2ì¼ í›„)

---

## ğŸ“š API ë¬¸ì„œ

- Swagger UI: [http://localhost:8000/docs](http://localhost:8000/docs)
- ReDoc: [http://localhost:8000/redoc](http://localhost:8000/redoc)
  > API ë¬¸ì„œëŠ” FastAPIì—ì„œ ìë™ ìƒì„±ë˜ë©°, ì‹¤ì œ ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ğŸ›£ï¸ ì£¼ìš” API ë¼ìš°íŠ¸

#### [ì¸ì¦]

- `POST /api/v1/utils/login/access-token` : ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰ (OAuth2)

#### [ì‹œí—˜ ì¼ì • Tryouts]

- `GET /api/v1/tryouts` : ì‹œí—˜ ì¼ì • ëª©ë¡ ì¡°íšŒ
- `GET /api/v1/tryouts/{id}` : ì‹œí—˜ ì¼ì • ìƒì„¸ ì¡°íšŒ
- `POST /api/v1/tryouts/{id}/reserve` : ì‹œí—˜ ì¼ì • ì˜ˆì•½ ì‹ ì²­

#### [ì˜ˆì•½ Reservations]

- `GET /api/v1/reservations` : ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ (ë³¸ì¸ or ì–´ë“œë¯¼ ì „ì²´)
- `GET /api/v1/reservations/{id}` : ì˜ˆì•½ ë‹¨ê±´ ì¡°íšŒ
- `PATCH /api/v1/reservations/{id}` : ì˜ˆì•½ ìˆ˜ì •
- `DELETE /api/v1/reservations/{id}/delete` : ì˜ˆì•½ ì‚­ì œ
- `POST /api/v1/reservations/{id}/confirm` : ì˜ˆì•½ í™•ì • (ì–´ë“œë¯¼ ì „ìš©)
